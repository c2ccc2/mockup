import{_ as y,e as j,a as I,w as $,r as w,G as S,f as _,c as x,j as s,h as d,i,p as l,t as b,y as C,z as P,o as k}from"./index-CR6ovanu.js";import{i as B,e as E,d as V}from"./project-DyOYFxcD.js";const m=c=>(C("data-v-2322f571"),c=c(),P(),c),N={class:"setting-container"},T={class:"section"},M=m(()=>s("div",{class:"section-title"},"当前状态",-1)),q={class:"section-content"},z={class:"status-display"},D={class:"status-buttons"},G={class:"section"},R=m(()=>s("div",{class:"section-title"},"删除项目",-1)),A={class:"section-content"},F={__name:"setting",props:{projectId:{type:String,required:!0}},setup(c){const{proxy:e}=j(),f=I(),a=c;$(()=>a.projectId,t=>{});const n=w(""),g=async()=>{if(a.projectId)try{const t=await B(a.projectId);t.code===200&&(n.value=t.data.status)}catch(t){console.error("获取项目成员列表失败:",t)}},u=async t=>{try{let o={projectId:a.projectId,enable:!t};const r=await E(o);r.code===200?(e.$modal.msgSuccess("项目状态更新成功"),n.value=t):e.$modal.msgError(r.msg)}catch{e.$modal.msgError("更新项目状态失败")}},h=async()=>{e.$modal.confirm("确定要删除该项目吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const t=await V(a.projectId);t.code===200?(e.$modal.msgSuccess("项目删除成功"),f.push("/projectmanager/projectbase")):e.$modal.msgError(t.msg)}catch{e.$modal.msgError("删除项目失败")}}).catch(()=>{e.$modal.msg("已取消删除")})};return S(()=>{g()}),(t,o)=>{const r=_("el-tag"),p=_("el-button");return k(),x("div",N,[s("div",T,[M,s("div",q,[s("div",z,[d(r,{type:n.value===!0?"success":"info"},{default:i(()=>[l(b(n.value===!0?"进行中":"停止"),1)]),_:1},8,["type"])]),s("div",D,[d(p,{type:"success",plain:"",onClick:o[0]||(o[0]=v=>u(!0))},{default:i(()=>[l("进行中")]),_:1}),d(p,{type:"info",plain:"",onClick:o[1]||(o[1]=v=>u(!1))},{default:i(()=>[l("停止项目")]),_:1})])])]),s("div",G,[R,s("div",A,[d(p,{type:"danger",plain:"",onClick:h},{default:i(()=>[l("删除项目")]),_:1})])])])}}},K=y(F,[["__scopeId","data-v-2322f571"]]);export{K as default};
