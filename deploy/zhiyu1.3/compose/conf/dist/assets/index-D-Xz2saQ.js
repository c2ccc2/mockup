import{_ as M,a as E,r as c,G as F,f as r,c as v,o as u,h as o,i as l,j as n,H as b,I as j,k as x,p as g,t as m,l as G}from"./index-CR6ovanu.js";import{a as H}from"./project-DyOYFxcD.js";import L from"./create-ClKP9Iu9.js";import"./user-VS3yfzIo.js";const R={class:"main"},T={slot:"header",class:"clearfix"},A={class:"grid-content"},J=["title"],K={class:"card-content"},O={class:"card-footer"},Q={class:"projectpeople"},W={key:0,class:"pagination-container"},X={__name:"index",setup(Y){const N=E(),w=c([{dictSort:1,type:"primary",icon:"el-icon-s-promotion",label:"进行中",value:"1"},{dictSort:2,type:"",icon:"el-icon-video-pause",label:"已停止",value:"0"}]),h=c([]),i=c("1"),f=c(0),s=c({pageNum:1,pageSize:12,status:"1"}),p=c(!1),C=t=>{i.value=t,s.value.status=t==="all"?void 0:t,s.value.pageNum=1,d()},d=async()=>{try{const t={pageNum:s.value.pageNum,pageSize:s.value.pageSize,status:s.value.status},a=await H(t);console.log("获取项目列表成功:",a),a.code===200&&(h.value=a.rows||a.data,f.value=a.total||0)}catch(t){console.error("获取项目列表失败:",t)}},V=()=>{p.value=!0},k=()=>{p.value=!1,d()},I=t=>{console.log(t);let a=t.projectId;N.push({path:"/project/detail/index",query:{projectId:a}})},P=t=>{s.value.pageSize=t,d()},B=t=>{s.value.pageNum=t,d()};return F(()=>{d()}),(t,a)=>{const _=r("el-button"),y=r("el-col"),z=r("el-row"),D=r("el-divider"),S=r("el-card"),$=r("el-pagination"),U=r("el-dialog");return u(),v("div",R,[o(S,{class:"box-card"},{default:l(()=>[n("div",T,[o(z,{gutter:10,class:"mb8"},{default:l(()=>[(u(!0),v(b,null,j(w.value,e=>(u(),x(y,{key:e.dictSort,span:1.5},{default:l(()=>[o(_,{class:"status-btn",type:e.value===i.value?e.type:"",plain:e.value!==i.value,size:"default",onClick:q=>C(e.value)},{default:l(()=>[g(m(e.label),1)]),_:2},1032,["type","plain","onClick"])]),_:2},1024))),128)),o(y,{span:1.5},{default:l(()=>[o(_,{class:"status-btn",type:i.value==="all"?"primary":"",plain:i.value!=="all",size:"default",onClick:a[0]||(a[0]=e=>C("all"))},{default:l(()=>[g(" 所有 ")]),_:1},8,["type","plain"])]),_:1}),o(_,{style:{float:"right"},size:"default",type:"primary",plain:"",onClick:V},{default:l(()=>[g("创建项目")]),_:1})]),_:1})]),n("div",A,[o(z,{class:"myprocard"},{default:l(()=>[(u(!0),v(b,null,j(h.value,e=>(u(),x(y,{span:6,key:e.projectId,class:"box-card-col"},{default:l(()=>[n("div",null,[o(S,{class:"box-card",shadow:"hover"},{default:l(()=>[n("div",{slot:"header",class:"clearfix card-header text-css",title:e.projectName},m(e.projectName),9,J),n("div",K,m(e.remark?e.remark:"暂无描述"),1),o(D),n("div",O,[n("div",Q,[n("span",null,"项目经理："+m(e.projectManagerName),1),n("span",null,[o(_,{onClick:q=>I(e),type:"primary",size:"small",plain:""},{default:l(()=>[g("详情")]),_:2},1032,["onClick"])])])])]),_:2},1024)])]),_:2},1024))),128))]),_:1}),f.value>0?(u(),v("div",W,[o($,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:f.value,"page-size":s.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>s.value.pageSize=e),"current-page":s.value.pageNum,"onUpdate:currentPage":a[2]||(a[2]=e=>s.value.pageNum=e),"page-sizes":[6,12,18,24],onSizeChange:P,onCurrentChange:B},null,8,["total","page-size","current-page"])])):G("",!0)])]),_:1}),o(U,{title:"创建项目",modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=e=>p.value=e),width:"50%","before-close":k},{default:l(()=>[o(L,{onSuccess:k,onCancel:a[3]||(a[3]=e=>p.value=!1)})]),_:1},8,["modelValue"])])}}},oe=M(X,[["__scopeId","data-v-0e648871"]]);export{oe as default};
