import{_ as $,s as J,e as U,G as j,r as v,J as q,an as R,f as a,c as T,o as g,h as s,i as o,k as I,l as V,m as b,p as u,j as n,ao as z,y as D,z as G}from"./index-CR6ovanu.js";const M="/assets/vip-CUQEInX7.jpg",x=r=>(D("data-v-3795b39a"),r=r(),G(),r),P={class:"system-info-container"},Q=x(()=>n("div",{class:"card-header"},[n("span",null,"系统信息配置")],-1)),X=x(()=>n("div",{class:"vip-image-container"},[n("img",{src:M,alt:"VIP升级二维码",class:"vip-image"})],-1)),A={class:"dialog-footer"},H={__name:"index",setup(r){const p=J(),{proxy:_}=U();j(()=>{y()});const i=v(),e=q({logo:"",loginName:"系统名称",title:"登录标题",bgJpg:""}),N={systemName:[{required:!0,message:"请输入系统名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],title:[{required:!0,message:"请输入登录页面标题",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}]},y=async()=>{try{const t=await R();t.data&&(e.logo=t.data.bgJpg||"",e.systemName=t.data.systemName||"知鱼项目管理系统",e.title=t.data.title||"欢迎使用知鱼项目管理系统",console.log("获取系统信息成功:",t.data))}catch(t){_.$modal.msgError("获取系统信息失败"),console.error("获取系统信息失败:",t)}},h=()=>{i.value&&i.value.validate(async t=>{t?(console.log("保存系统信息:",e),await z(e),p.setSystemInfo({logo:e.logo,loginName:e.systemName,title:e.title}),_.$modal.msgSuccess("系统信息保存成功!")):_.$modal.msgError("请填写正确的表单信息!")})},k=async()=>{var t;(t=i.value)==null||t.resetFields(),e.logo="",e.systemName="知鱼项目管理系统",e.title="欢迎使用知鱼项目管理系统",await y()},m=v(!1),w=async()=>{m.value=!0};return(t,l)=>{const S=a("el-alert"),C=a("el-input"),f=a("el-form-item"),c=a("el-button"),F=a("el-form"),B=a("el-card"),E=a("el-dialog");return g(),T("div",P,[s(B,{class:"system-info-card"},{header:o(()=>[Q]),default:o(()=>[b(p).isVip?V("",!0):(g(),I(S,{key:0,title:"该功能仅限捐赠用户使用，如需使用请升级为捐赠用户",type:"warning","show-icon":"",class:"vip-alert"})),s(F,{model:e,rules:N,ref_key:"systemInfoFormRef",ref:i,"label-width":"120px",class:"system-info-form"},{default:o(()=>[s(f,{label:"登录标题",prop:"title"},{default:o(()=>[s(C,{modelValue:e.loginName,"onUpdate:modelValue":l[0]||(l[0]=d=>e.loginName=d),placeholder:"请输入登录页面标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(f,null,{default:o(()=>[s(c,{type:"primary",onClick:h},{default:o(()=>[u("保存配置")]),_:1}),s(c,{onClick:k},{default:o(()=>[u("重置")]),_:1})]),_:1}),s(f,null,{default:o(()=>[b(p).isVip?V("",!0):(g(),I(c,{key:0,type:"primary",onClick:w},{default:o(()=>[u("升级为捐赠用户")]),_:1}))]),_:1})]),_:1},8,["model"])]),_:1}),s(E,{modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=d=>m.value=d),title:"升级为捐赠用户",center:"",width:"500px"},{footer:o(()=>[n("span",A,[s(c,{onClick:l[1]||(l[1]=d=>m.value=!1)},{default:o(()=>[u("关闭")]),_:1})])]),default:o(()=>[X]),_:1},8,["modelValue"])])}}},L=$(H,[["__scopeId","data-v-3795b39a"]]);export{L as default};
