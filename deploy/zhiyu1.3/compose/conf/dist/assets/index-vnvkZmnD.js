import{D as M,_ as B,F as E,a as V,d as D,r as w,G as F,f as _,c as v,j as e,h as c,m as P,t,i as u,p as j,H as x,I as C,y as J,z as $,o as h}from"./index-CR6ovanu.js";import{l as G}from"./project-DyOYFxcD.js";function H(){return M({url:"/home/loginRecords",method:"get"})}function O(d){return M({url:"/home/userStats",method:"get",params:d})}function q(d){return M({url:"/home/myAchievement",method:"get",params:d})}const o=d=>(J("data-v-f4f2f663"),d=d(),$(),d),K={class:"dashboard-container"},Q={class:"top-info-container"},W={class:"user-info"},X={class:"user-avatar"},Y={class:"user-greeting"},Z={class:"stats-container"},ee={class:"stat-item"},se=o(()=>e("div",{class:"stat-title"},"指派给我",-1)),te={class:"stat-value"},ae=o(()=>e("div",{class:"stat-subtitle"},"待完成工作数",-1)),oe={class:"stat-item"},ce=o(()=>e("div",{class:"stat-title"},"待我评审",-1)),ne={class:"stat-value"},ie=o(()=>e("div",{class:"stat-subtitle"},"待评审工作数",-1)),de={class:"stat-item"},le=o(()=>e("div",{class:"stat-title"},"我创建的",-1)),re={class:"stat-value"},_e=o(()=>e("div",{class:"stat-subtitle"},"进行中的任务",-1)),ve={class:"main-content"},he={class:"recent-projects"},ue={class:"card-header"},me=o(()=>e("h3",null,"我参与的项目",-1)),pe={class:"header-actions"},ye={class:"projects-grid"},fe={class:"project-header"},ge={class:"execution-status"},ke={key:0,class:"status-running"},we={key:1,class:"status-completed"},Ie={class:"side-panel"},Me={class:"achievement-card"},Te=o(()=>e("div",{class:"card-header"},[e("h3",null,"我的成就")],-1)),Se={class:"achievements-grid"},be={class:"achievement-item"},Pe={class:"achievement-icon"},je={class:"achievement-content"},xe=o(()=>e("div",{class:"achievement-title"},"完成的工作数量",-1)),Ce={class:"achievement-stats"},Re={class:"achievement-item"},Le={class:"achievement-icon"},Ne={class:"achievement-content"},Ue=o(()=>e("div",{class:"achievement-title"},"通过审核的数量",-1)),ze={class:"achievement-stats"},Ae={class:"achievement-item"},Be={class:"achievement-icon"},Ee={class:"achievement-content"},Ve=o(()=>e("div",{class:"achievement-title"},"我创建的任务数量",-1)),De={class:"achievement-stats"},Fe={class:"achievement-item"},Je={class:"achievement-icon"},$e={class:"achievement-content"},Ge=o(()=>e("div",{class:"achievement-title"},"发布的原型",-1)),He={class:"achievement-stats"},Oe={class:"activity-card"},qe=o(()=>e("div",{class:"card-header"},[e("h3",null,"最新动态"),e("div",{class:"header-actions"})],-1)),Ke={class:"activity-list"},Qe={class:"activity-time"},We={class:"activity-content"},Xe={class:"activity-user"},Ye={class:"activity-action"},Ze=E({name:"Index"}),es=Object.assign(Ze,{setup(d){const R=V(),T=D(),m=w({pendingReview:0,assignedToMe:0,inProgress:0}),L=async()=>{try{const s=await O();s.code===200&&(m.value={pendingReview:s.data.pendingReview||0,assignedToMe:s.data.assignedToMe||0,inProgress:s.data.inProgress||0})}catch(s){console.error("获取用户统计数据失败:",s)}},S=w([]),N=async()=>{try{const s=await G();console.log("我参与项目数据:",s),s.code===200&&(S.value=s.rows||[])}catch(s){console.error("获取参与项目数据失败:",s)}},n=w({completedItems:{yesterday:0,today:0},reviewItems:{yesterday:0,today:0},createTask:{yesterday:0,today:0},createMockup:{yesterday:0,today:0}}),U=async()=>{var s,i,p,y,f,r,g,k;try{const a=await q();console.log("我的成就数据:",a),a.code===200&&(n.value={completedItems:{yesterday:((s=a.data.completedItems)==null?void 0:s.yesterday)||0,today:((i=a.data.completedItems)==null?void 0:i.today)||0},reviewItems:{yesterday:((p=a.data.reviewItems)==null?void 0:p.yesterday)||0,today:((y=a.data.reviewItems)==null?void 0:y.today)||0},createTask:{yesterday:((f=a.data.createTask)==null?void 0:f.yesterday)||0,today:((r=a.data.createTask)==null?void 0:r.today)||0},createMockup:{yesterday:((g=a.data.createMockup)==null?void 0:g.yesterday)||0,today:((k=a.data.createMockup)==null?void 0:k.today)||0}})}catch(a){console.error("获取成就数据失败:",a)}},b=w([]),z=async()=>{try{const s=await H({pageNum:1,pageSize:10});s.code===200&&(b.value=s.rows.map(i=>({time:i.time,user:i.user,action:i.action})))}catch(s){console.error("获取登录日志失败:",s)}},A=s=>{R.push({path:`/${s}`})};return F(()=>{z(),L(),N(),U()}),(s,i)=>{const p=_("el-avatar"),y=_("el-button"),f=_("Checked"),r=_("el-icon"),g=_("Edit"),k=_("Plus"),a=_("Upload");return h(),v("div",K,[e("div",Q,[e("div",W,[e("div",X,[c(p,{size:40,src:P(T).avatar},null,8,["src"])]),e("div",Y,[e("p",null,t(P(T).name)+", 下午好",1)])]),e("div",Z,[e("div",ee,[se,e("div",te,t(m.value.assignedToMe),1),ae]),e("div",oe,[ce,e("div",ne,t(m.value.pendingReview),1),ie]),e("div",de,[le,e("div",re,t(m.value.inProgress),1),_e])])]),e("div",ve,[e("div",he,[e("div",ue,[me,e("div",pe,[c(y,{link:"",size:"small",onClick:i[0]||(i[0]=l=>A("space/"))},{default:u(()=>[j("更多")]),_:1})])]),e("div",ye,[(h(!0),v(x,null,C(S.value,(l,I)=>(h(),v("div",{key:I,class:"project-card"},[e("div",fe,[e("h4",null,t(l.projectName),1),e("p",null,"项目成员: 共 "+t(l.members)+" 人",1)]),e("div",ge,[e("span",null,[e("span",null,[j(" 当前状态： "),l.enable?(h(),v("span",ke,"进行中")):(h(),v("span",we,"已暂停"))])])])]))),128))])]),e("div",Ie,[e("div",Me,[Te,e("div",Se,[e("div",be,[e("div",Pe,[c(r,null,{default:u(()=>[c(f)]),_:1})]),e("div",je,[xe,e("div",Ce,[e("span",null,"昨日 "+t(n.value.completedItems.yesterday),1),e("span",null,"今天 "+t(n.value.completedItems.today),1)])])]),e("div",Re,[e("div",Le,[c(r,null,{default:u(()=>[c(g)]),_:1})]),e("div",Ne,[Ue,e("div",ze,[e("span",null,"昨日 "+t(n.value.reviewItems.yesterday),1),e("span",null,"今天 "+t(n.value.reviewItems.today),1)])])]),e("div",Ae,[e("div",Be,[c(r,null,{default:u(()=>[c(k)]),_:1})]),e("div",Ee,[Ve,e("div",De,[e("span",null,"昨日 "+t(n.value.createTask.yesterday),1),e("span",null,"今天 "+t(n.value.createTask.today),1)])])]),e("div",Fe,[e("div",Je,[c(r,null,{default:u(()=>[c(a)]),_:1})]),e("div",$e,[Ge,e("div",He,[e("span",null,"昨日 "+t(n.value.createMockup.yesterday),1),e("span",null,"今天 "+t(n.value.createMockup.today),1)])])])])]),e("div",Oe,[qe,e("div",Ke,[(h(!0),v(x,null,C(b.value,(l,I)=>(h(),v("div",{key:I,class:"activity-item"},[e("div",Qe,t(l.time),1),e("div",We,[e("span",Xe,t(l.user),1),e("span",Ye,t(l.action),1)])]))),128))])])])])])}}}),as=B(es,[["__scopeId","data-v-f4f2f663"]]);export{as as default};
