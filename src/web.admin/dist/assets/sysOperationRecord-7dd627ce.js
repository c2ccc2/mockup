/*! 
 Build based on gin-vue-admin 
 Time : 1691853746000 */
import{s as e,r as a,U as l,o as t,c as o,b as r,d as i,w as s,g as u,t as p,A as d,h as n,j as c,k as m,E as v,N as f}from"./index-0bfeb27f.js";import{E as g}from"./pagination-03fa4f62.js";/* empty css              */import"./tag-15f192e1.js";import"./select-d293b731.js";import"./scrollbar-6b9509a8.js";/* empty css               */import{E as y,a as h}from"./table-column-1bad9f17.js";import"./checkbox-f5d517b9.js";/* empty css                *//* empty css             */import{E as b}from"./popover-5c4c93b4.js";import{a as w,E as j}from"./form-item-a55599b0.js";/* empty css               */import{f as _}from"./format-b3636fbf.js";import{E as k}from"./index-8d3ad3bc.js";import"./isEqual-339b8c6d.js";import"./_Uint8Array-d89fe392.js";import"./index-6a4135d5.js";import"./strings-b3c40925.js";import"./_initCloneObject-89462581.js";import"./dropdown-36328bae.js";import"./_baseClone-50f5604a.js";import"./date-225eaf4f.js";import"./dictionary-777efda8.js";import"./sysDictionary-5b4c5894.js";const C={class:"gva-search-box"},V={class:"gva-table-box"},x={class:"gva-btn-list"},O=r("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},U={class:"popover-box"},E={key:1},z={class:"popover-box"},R={key:1},I=r("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},N={class:"gva-pagination"},A={name:"SysOperationRecord"},q=Object.assign(A,{setup(A){const q=a(1),B=a(0),J=a(10),L=a([]),P=a({}),T=()=>{P.value={}},W=()=>{q.value=1,J.value=10,""===P.value.status&&(P.value.status=null),Z()},X=e=>{J.value=e,Z()},Y=e=>{q.value=e,Z()},Z=async()=>{const a=await(l={page:q.value,pageSize:J.value,...P.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:l}));var l;0===a.code&&(L.value=a.data.list,B.value=a.data.total,q.value=a.data.page,J.value=a.data.pageSize)};Z();const F=a(!1),G=a([]),H=e=>{G.value=e},K=async()=>{const a=[];G.value&&G.value.forEach((e=>{a.push(e.ID)}));var l;0===(await(l={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),L.value.length===a.length&&q.value>1&&q.value--,F.value=!1,Z())},M=async a=>{a.visible=!1;var l;0===(await(l={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),1===L.value.length&&q.value>1&&q.value--,Z())},Q=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const c=m,A=w,Z=v,$=j,ee=b,ae=y,le=k,te=l("warning"),oe=f,re=h,ie=g;return t(),o("div",null,[r("div",C,[i($,{inline:!0,model:P.value},{default:s((()=>[i(A,{label:"请求方法"},{default:s((()=>[i(c,{modelValue:P.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,{label:"请求路径"},{default:s((()=>[i(c,{modelValue:P.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,{label:"结果状态码"},{default:s((()=>[i(c,{modelValue:P.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>P.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,null,{default:s((()=>[i(Z,{type:"primary",icon:"search",onClick:W},{default:s((()=>[u("查询")])),_:1}),i(Z,{icon:"refresh",onClick:T},{default:s((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),r("div",V,[r("div",x,[i(ee,{modelValue:F.value,"onUpdate:modelValue":a[5]||(a[5]=e=>F.value=e),placement:"top",width:"160"},{reference:s((()=>[i(Z,{icon:"delete",style:{"margin-left":"10px"},disabled:!G.value.length,onClick:a[4]||(a[4]=e=>F.value=!0)},{default:s((()=>[u("删除")])),_:1},8,["disabled"])])),default:s((()=>[O,r("div",S,[i(Z,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>F.value=!1)},{default:s((()=>[u("取消")])),_:1}),i(Z,{type:"primary",onClick:K},{default:s((()=>[u("确定")])),_:1})])])),_:1},8,["modelValue"])]),i(re,{ref:"multipleTable",data:L.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:H},{default:s((()=>[i(ae,{align:"left",type:"selection",width:"55"}),i(ae,{align:"left",label:"操作人",width:"140"},{default:s((e=>[r("div",null,p(e.row.user.userName)+"("+p(e.row.user.nickName)+")",1)])),_:1}),i(ae,{align:"left",label:"日期",width:"180"},{default:s((e=>[u(p(d(_)(e.row.CreatedAt)),1)])),_:1}),i(ae,{align:"left",label:"状态码",prop:"status",width:"120"},{default:s((e=>[r("div",null,[i(le,{type:"success"},{default:s((()=>[u(p(e.row.status),1)])),_:2},1024)])])),_:1}),i(ae,{align:"left",label:"请求IP",prop:"ip",width:"120"}),i(ae,{align:"left",label:"请求方法",prop:"method",width:"120"}),i(ae,{align:"left",label:"请求路径",prop:"path",width:"240"}),i(ae,{align:"left",label:"请求",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.body?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",U,[r("pre",null,p(Q(e.row.body)),1)])])),_:2},1024)):(t(),o("span",E,"无"))])])),_:1}),i(ae,{align:"left",label:"响应",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.resp?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",z,[r("pre",null,p(Q(e.row.resp)),1)])])),_:2},1024)):(t(),o("span",R,"无"))])])),_:1}),i(ae,{align:"left",label:"操作"},{default:s((e=>[i(ee,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:s((()=>[i(Z,{icon:"delete",type:"primary",link:"",onClick:a=>e.row.visible=!0},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),default:s((()=>[I,r("div",D,[i(Z,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:s((()=>[u("取消")])),_:2},1032,["onClick"]),i(Z,{type:"primary",onClick:a=>M(e.row)},{default:s((()=>[u("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),r("div",N,[i(ie,{"current-page":q.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:Y,onSizeChange:X},null,8,["current-page","page-size","total"])])])])}}});export{q as default};
